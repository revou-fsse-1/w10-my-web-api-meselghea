{"ast":null,"code":"import _objectSpread from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import config from\"../../config.json\";import{useEffect,useState}from\"react\";import axios from\"axios\";import\"./Post.css\";import{useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState({title:\"\",content:\"\"}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];useEffect(function(){if(!id)return;var fetchPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(config.apiUrl,\"/posts\"));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setPost(data);case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchPost(){return _ref.apply(this,arguments);};}();fetchPost();},[]);var handleChange=function handleChange(e){var postClone=_objectSpread({},post);postClone[e.target.name]=e.target.value;setPost(postClone);};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var myJSON;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(post);myJSON=JSON.stringify(post);if(!(id===\"new\")){_context2.next=9;break;}_context2.next=6;return axios.post(\"\".concat(config.apiUrl,\"/posts\"),myJSON);case 6:return _context2.abrupt(\"return\",navigate(\"/\"));case 9:_context2.next=11;return axios.put(\"\".concat(config.apiUrl,\"/posts/\").concat(id),myJSON);case 11:return _context2.abrupt(\"return\",navigate(\"/index.js\"));case 12:case\"end\":return _context2.stop();}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"post__wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title...\",name:\"title\",value:post.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Content...\",name:\"content\",value:post.content,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"btn btn-primary\",children:id===\"new\"?\"Post\":\"Update\"})]})})});};export default Post;","map":{"version":3,"names":["config","useEffect","useState","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","Post","navigate","_useParams","id","_useState","title","content","_useState2","_slicedToArray","post","setPost","fetchPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","apiUrl","sent","stop","apply","arguments","handleChange","e","postClone","_objectSpread","target","name","value","handleSubmit","_ref2","_callee2","myJSON","_callee2$","_context2","preventDefault","console","log","JSON","stringify","abrupt","put","_x","className","children","type","placeholder","onChange","onClick"],"sources":["/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/src/Pages/Post/Post.jsx"],"sourcesContent":["import config from \"../../config.json\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Post.css\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nconst Post = () => {\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const [post, setPost] = useState({\n    title: \"\",\n    content: \"\",\n  });\n\n  useEffect(() => {\n    if (!id) return;\n    const fetchPost = async () => {\n      const { data } = await axios.get(`${config.apiUrl}/posts`);\n      setPost(data);\n    }\n    fetchPost();\n  }, []);\n\n  const handleChange = (e) => {\n    const postClone = { ...post };\n    postClone[e.target.name] = e.target.value;\n    setPost(postClone);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(post);\n    const myJSON = JSON.stringify(post);\n    if (id === \"new\") {\n      await axios.post(`${config.apiUrl}/posts`, myJSON);\n      return navigate(\"/\");\n    } else {\n      await axios.put(`${config.apiUrl}/posts/${id}`, myJSON);\n      return navigate(\"/index.js\");\n    }\n  };\n\n  return (\n    <div className=\"post__wrapper\">\n      <div className=\"container\">\n        <form className=\"post\">\n          <input\n            type=\"text\"\n            placeholder=\"Title...\"\n            name=\"title\"\n            value={post.title}\n            onChange={handleChange}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Content...\"\n            name=\"content\"\n            value={post.content}\n            onChange={handleChange}\n          />\n          <button onClick={handleSubmit} className=\"btn btn-primary\">\n            {id === \"new\" ? \"Post\" : \"Update\"}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Post;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}