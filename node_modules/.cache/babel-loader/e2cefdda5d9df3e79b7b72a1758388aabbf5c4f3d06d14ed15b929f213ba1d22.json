{"ast":null,"code":"import _regeneratorRuntime from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import config from\"../../config.json\";import axios from\"axios\";import\"./Posts.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(config.apiUrl,\"/posts\"));case 2:res=_context.sent;setPosts(res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchPosts();},[]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(post){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setPosts(posts.filter(function(p){return p._id!==post._id;}));_context2.next=3;return axios.delete(\"\".concat(config.apiUrl,\"/posts\").concat(post._id));case 3:case\"end\":return _context2.stop();}},_callee2);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/post/new\");},className:\"btn btn-primary mb-4\",children:\"New Post\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Body\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:posts.map(function(post){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",post.title,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",post.content,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/post/\".concat(post._id));},className:\"btn btn-primary\",children:\"Update\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(post);},className:\"btn btn-danger\",children:\"Delete\"})})]},post._id);})})]})]})});};export default Posts;","map":{"version":3,"names":["useEffect","useState","useNavigate","config","axios","jsx","_jsx","jsxs","_jsxs","Posts","navigate","_useState","_useState2","_slicedToArray","posts","setPosts","fetchPosts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","concat","apiUrl","sent","data","stop","apply","arguments","handleDelete","_ref2","_callee2","post","_callee2$","_context2","filter","p","_id","delete","_x","className","children","onClick","map","title","content"],"sources":["/Users/meselgheahilyatinisrin/mesel ghea revou fsse/coba/latihan/src/Pages/Posts/Posts.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport config from \"../../config.json\";\nimport axios from \"axios\";\nimport \"./Posts.css\";\n\nconst Posts = () => {\n  const navigate = useNavigate();\n  const [posts, setPosts] = useState([]);\n\n  const fetchPosts = async () => {\n    const res = await axios.get(`${config.apiUrl}/posts`);\n    setPosts(res.data);\n  };\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  const handleDelete = async (post) => {\n    setPosts(posts.filter((p) => p._id !== post._id));\n    await axios.delete(`${config.apiUrl}/posts${post._id}`);\n  };\n\n  return (\n    <div className=\"posts\">\n      <div className=\"container\">\n        <button\n          onClick={() => navigate(\"/post/new\")}\n          className=\"btn btn-primary mb-4\"\n        >\n          New Post\n        </button>\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Title</th>\n              <th>Body</th>\n              <th>Update</th>\n              <th>Delete</th>\n            </tr>\n          </thead>\n          <tbody>\n            {posts.map((post) => (\n              <tr key={post._id}>\n                <td> {post.title} </td>\n                <td> {post.content} </td>\n                <td>\n                  <button\n                    onClick={() => navigate(`/post/${post._id}`)}\n                    className=\"btn btn-primary\"\n                  >\n                    Update\n                  </button>\n                </td>\n                <td>\n                  <button\n                    onClick={() => handleDelete(post)}\n                    className=\"btn btn-danger\"\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}